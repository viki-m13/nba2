<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NBA Dominance System — Pre-Game Picks</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ─────────────────── HEADER ─────────────────── -->
  <header class="header">
    <div class="header-left">
      <span class="brand">NBA Dominance</span>
      <span class="brand-tag">ADI Pre-Game Model</span>
    </div>
    <nav class="header-nav">
      <button class="nav-btn active" data-view="picks">Today's Picks</button>
      <button class="nav-btn" data-view="history">History</button>
      <button class="nav-btn" data-view="how">How It Works</button>
    </nav>
    <div class="header-right">
      <span id="status-dot" class="status-dot offline"></span>
      <span id="status-text" class="status-text">Loading...</span>
    </div>
  </header>

  <!-- ─────────────────── METRICS BAR ─────────────────── -->
  <div class="metrics-bar">
    <div class="metric">
      <span class="metric-value" id="metric-picks">—</span>
      <span class="metric-label">Today's Picks</span>
    </div>
    <div class="metric">
      <span class="metric-value" id="metric-games">—</span>
      <span class="metric-label">Games Today</span>
    </div>
    <div class="metric">
      <span class="metric-value" id="metric-accuracy">83.3%</span>
      <span class="metric-label">Model ML Accuracy</span>
    </div>
    <div class="metric">
      <span class="metric-value" id="metric-roi">+58%</span>
      <span class="metric-label">ROI at -110</span>
    </div>
    <div class="metric">
      <span class="metric-value" id="metric-record">—</span>
      <span class="metric-label">Season Record</span>
    </div>
  </div>

  <!-- ─────────────────── MAIN CONTENT ─────────────────── -->
  <main class="main">

    <!-- ═══════ VIEW: TODAY'S PICKS ═══════ -->
    <div id="view-picks" class="view active">

      <div id="picks-loading" class="loading-state">
        <div class="spinner"></div>
        <p>Loading team data and today's games...</p>
      </div>

      <div id="picks-container" class="picks-grid" style="display:none;">
        <!-- Pick cards injected here by JS -->
      </div>

      <div id="picks-empty" class="empty-state" style="display:none;">
        <h2>No Qualifying Picks Today</h2>
        <p>The ADI model found no games meeting the HIGH or STRONG confidence thresholds.</p>
        <p class="subtle">Filters require: net rating gap &ge; 10, favorite offensive rating &ge; 118.</p>
        <p class="subtle">On average, 4-6 games per month qualify.</p>
      </div>

      <div id="all-games-section" style="display:none;">
        <h3 class="section-title">All Games Today</h3>
        <div id="all-games-grid" class="games-grid">
          <!-- All today's games shown here -->
        </div>
      </div>

    </div>

    <!-- ═══════ VIEW: HISTORY ═══════ -->
    <div id="view-history" class="view">
      <h2 class="section-title">Pick History</h2>
      <div class="filter-bar">
        <button class="filter-btn active" data-period="7">Last 7 Days</button>
        <button class="filter-btn" data-period="14">Last 14 Days</button>
        <button class="filter-btn" data-period="30">Last 30 Days</button>
        <button class="filter-btn" data-period="all">Full Season</button>
      </div>
      <div id="history-table-wrap" class="table-wrap">
        <table class="data-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Pick</th>
              <th>Matchup</th>
              <th>Confidence</th>
              <th>Pred. Margin</th>
              <th>Actual Margin</th>
              <th>Result</th>
              <th>P&amp;L</th>
              <th>Team Total</th>
            </tr>
          </thead>
          <tbody id="history-body">
            <tr><td colspan="9" class="muted">Loading history...</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ═══════ VIEW: HOW IT WORKS ═══════ -->
    <div id="view-how" class="view">
      <div class="how-content">
        <h2>How the ADI Pre-Game Model Works</h2>

        <div class="how-section">
          <h3>The Strategy</h3>
          <p>Before each game, the <strong>Asymmetric Dominance Index (ADI)</strong> analyzes
          rolling team metrics to identify lopsided matchups. When a strong offensive team
          (118+ PPG) faces a weaker opponent with a large net rating gap (10+ points)
          at home, the model flags it as a <strong>HIGH confidence</strong> pick.</p>
          <p>You then place <strong>two bets</strong>:</p>
          <ol>
            <li><strong>Pre-game spread at -110</strong> on the favored team (primary bet)</li>
            <li><strong>Team Total OVER</strong> on the favored team (secondary bet — 97.6% hit rate)</li>
          </ol>
        </div>

        <div class="how-section">
          <h3>Validated Results</h3>
          <div class="results-grid">
            <div class="result-card">
              <div class="result-value">83.3%</div>
              <div class="result-label">ML Win Rate (HIGH)</div>
              <div class="result-detail">35 of 42 games — favorite wins outright</div>
            </div>
            <div class="result-card highlight-cyan">
              <div class="result-value">97.6%</div>
              <div class="result-label">Score 110+ (HIGH)</div>
              <div class="result-detail">41 of 42 games — favorite scores 110+</div>
            </div>
            <div class="result-card">
              <div class="result-value">88.1%</div>
              <div class="result-label">Score 115+ (HIGH)</div>
              <div class="result-detail">37 of 42 games — fav scores 115+ (avg: 125)</div>
            </div>
            <div class="result-card">
              <div class="result-value">481</div>
              <div class="result-label">Games Analyzed</div>
              <div class="result-detail">2024-25 season walk-forward validation</div>
            </div>
          </div>
        </div>

        <div class="how-section">
          <h3>Team Total Over — Why It Works</h3>
          <p>In HIGH confidence games, the favorite is a <strong>118+ PPG offensive team at home</strong>
          against a weak opponent. They almost always deliver big scoring nights:</p>
          <ul class="factor-list">
            <li><strong>97.6%</strong> scored 110+ points (41 of 42 games)</li>
            <li><strong>88.1%</strong> scored 115+ points (37 of 42 games)</li>
            <li><strong>Average score: 125 points</strong> — well above any typical team total line</li>
            <li>Only <strong>1 miss</strong> in 42 games (NYK scored 100 vs ATL on 12/11)</li>
          </ul>
          <p>Look for the <strong>"Team Totals"</strong> market on your sportsbook and bet the
          favorite's <strong>OVER</strong> at -110. This is a separate bet from the game total.</p>
        </div>

        <div class="how-section">
          <h3>Model Factors</h3>
          <ul class="factor-list">
            <li><strong>Offensive Rating</strong> — Favorite's points per game (rolling 15-game avg)</li>
            <li><strong>Defensive Rating</strong> — Opponent's points allowed per game</li>
            <li><strong>Net Rating Gap</strong> — Difference in team net ratings (points scored minus allowed)</li>
            <li><strong>Home Court</strong> — 3.5-point home advantage multiplier</li>
            <li><strong>Blowout Probability Score (BPS)</strong> — Composite of all factors, weighted 40% net gap</li>
          </ul>
        </div>

        <div class="how-section">
          <h3>HIGH Confidence Filter</h3>
          <p>A game qualifies as HIGH confidence when <strong>all three</strong> conditions are met:</p>
          <ol>
            <li>Net rating gap between teams &ge; 10 points</li>
            <li>Favorite's offensive rating &ge; 118 PPG</li>
            <li>Favorite is playing at home</li>
          </ol>
        </div>

        <div class="how-section">
          <h3>How to Execute</h3>
          <ol>
            <li>Check this page before games start (updated daily)</li>
            <li>When a pick is shown, go to your sportsbook's pre-game lines</li>
            <li><strong>Bet 1 — Spread:</strong> Bet the recommended team's spread at -110 (Kelly: 8% for HIGH, 6% for STRONG)</li>
            <li><strong>Bet 2 — Team Total Over:</strong> Find the team's individual total and bet OVER at -110 (Kelly: 4%)</li>
            <li>Track results on the History tab</li>
          </ol>
        </div>

        <div class="how-section">
          <h3>Important Notes</h3>
          <ul class="notes-list">
            <li>This model has ~83% ML accuracy — the favorite <em>wins</em> 83% of the time</li>
            <li>Spread coverage is lower (~70-75%) because spreads are set near the expected margin</li>
            <li>Even at 70% spread coverage, ROI is +27% at -110 — highly profitable</li>
            <li>Average of 4-6 qualifying picks per month — be patient, only bet when model fires</li>
            <li>In-game DIAMOND/PLATINUM ML signals remain available in the backend for live game monitoring</li>
          </ul>
        </div>
      </div>
    </div>

  </main>

  <!-- ─────────────────── SCRIPTS ─────────────────── -->
  <script src="js/nba-api.js"></script>
  <script src="js/parlay-engine.js"></script>
  <script src="js/main.js"></script>

</body>
</html>
